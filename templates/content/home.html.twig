{% extends 'base.html.twig' %}

{% block title %}Accueil{% endblock %}

{% block body %}
    
    <div class="wrapper wrapper-home wrapper-full-width full-background">
        <div class="news-container">
            {% if home_contents.flashes is defined %}
                {% for content in home_contents.flashes %}
                    <div class="block background-color background-primary block-flash reveal" data-toggle="block-body">   
                        <div class="block-title">
                            <h2>{{ content.title }}</h2>
                            <span class="tools">
                                <a href="" class="btn btn-ico" data-action="toggle-down"><i class="far fa-caret-square-down"></i></a>
                            </span>
                        </div>  
                        <div class="block-body up" data-target="block-body">
                            {% include('content/body_content.html.twig') %}
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
            {% if home_contents.contents is defined %}
                {% for content in home_contents.contents %}
                    <div class="block reveal{% if not(content.content matches '/iframe/') %} background-clear{% endif %}">        
                        <div class="block-body">
                            {% include('content/body_content.html.twig') %}
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
        <div class="bike-rides-container">
            <div class="block background-clear reveal">
                {% if bikeRides is not empty %}
                <div class="block-body">
                    <ul>
                    {% for bikeRide in bikeRides %}
                        <li>
                            <h2>
                                {% if bikeRide.endAt is null %}
                                    {{ bikeRide.startAt | format_date(locale='fr', pattern='EEEE d/M/yy')  | capitalize }}
                                {% else %}
                                    du {{ bikeRide.startAt | format_date(locale='fr', pattern='EEEE d/M/yy') | capitalize }} au {{ bikeRide.endAt | format_date(locale='fr', pattern='EEEE d/M/Y') | capitalize }}
                                {% endif %}
                            </h2>
                            <p>{{ bikeRide.title }}</p>
                        </li>
                    {% endfor %}
                    </ul>
                </div>
                {% endif %}
                <div class="block-footer">
                    <a href="{{ path('schedule', {'period': 'prochainement'}) }}" class="btn btn-secondary align-center btn-full-width"><i class="fas fa-chevron-circle-right"></i> Voir le programme</a>
                </div>
            </div>
            {% for link in links_bike_ride %}
            <div class="card card-img-only reveal">
                <a href="{{ link.url }}" target="_blank" title="{{ link.title }}">
                    {% set src = link.image matches '/^http/' or  link.image is null ? link.image : '../../uploads/' ~ link.image%}
                    <img src="{{ src }}" alt="">
                </a>
            </div>
            {% endfor %}
        </div>
        <div class="links-container col-4">
            {% for link in links_footer %}
            <a href="{{ link.url }}" target="_blank" title="{{ link.title }}" class="reveal">
                <div class="card card-full-img">
                    {% set src = link.image matches '/^http/' or  link.image is null ? link.image : '../../uploads/' ~ link.image%}
                    <div style="background-image:url({{ src }}"></div>
                </div>
            </a>
            {% endfor %}
        </div>
        
    </div>
{% endblock %}
