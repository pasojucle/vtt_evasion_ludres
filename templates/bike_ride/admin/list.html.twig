{% extends 'base.html.twig' %}

{% block title %}Calendrier des sorties{% endblock %}

{% block body %}
    <div class="wrapper">
        <div class="wrapper-title">
            <h2>Programme des sorties</h2>
            <span class="tools">
            {% if is_granted('ROLE_ADMIN') %}
                <a href="{{ path('admin_bike_ride_edit') }}" class="btn btn-secondary btn-ico" title="Ajouter une sortie"><i class="fas fa-plus"></i></a>
            {% endif %}
            </span>
        </div>
        <div class="wrapper-body">
            {% include('bike_ride/filter.html.twig') %}
            <ul>
                {% for bikeRide in bikeRides %}                      
                    <li class="col-list col-list-2btn">
                        {% set bikeRide_content %}
                            <div class="row">
                                <div class="col-md-3 col-xs-5">{{ bikeRide.startAt | date('d/m/y') }}</div>
                                <div class="col-md-9 col-xs-7">{{ bikeRide.title }}</div>
                            </div>
                        {% endset %}
                        {% if bikeRide.bikeRideType.isRegistrable %}
                            <a class="btn btn-list btn-light" href="{{ path('admin_bike_ride_cluster_show', {'bikeRide' : bikeRide.entity.id}) }}" title="Voir les participants">
                                {{ bikeRide_content }}
                            </a>
                        {% else %}
                            <div class="list-item">{{ bikeRide_content }}</div>
                        {% endif %}
                        <div>
                            {% if is_granted('ROLE_ADMIN') %}
                                <a class="btn btn-primary btn-ico" href="{{ path('admin_bike_ride_edit', {'bikeRide' : bikeRide.entity.id}) }}" title="Modifier"><i class="fas fa-pencil-alt"></i></a>
                                {% if bikeRide.startAt <= date() %}
                                    <a href="{{ path('admin_bike_ride_export', {'bikeRide': bikeRide.entity.id}) }}" class="btn btn-success btn-ico" title="Exporter la sÃ©ance">
                                        <i class="fas fa-file-download"></i>
                                    </a>
                                {% endif %}
                            {% endif %}
                        </div>
                    </li>
                {% endfor %}
            </ul>
        </div>
        {% include('common/pagination.html.twig') %}
    </div>
{% endblock %}
